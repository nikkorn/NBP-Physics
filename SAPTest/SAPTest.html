<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>The HTML5 Herald</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">
</head>

<body></body>
<script>
  var canvas = document.createElement("canvas");
  var ctx = canvas.getContext("2d");

  canvas.width = 500;
  canvas.height = 500;
  canvas.style.border = "thin solid black";
  canvas.style.background = "#FFFFF";

  /**
   * Create an AABB at x/y with the width/height. 
   */
  function createAABB(name, x, y, width, height)
  {
    return { name, x, y, width, height, halfWidth: width / 2, halfHeight: height / 2 };
  }

  function findXAxisIntersections(boxes) 
  {
    // Sort items by left-most min x (just left edge) into sortedList.
    // Create active list and add first (left-most) sorted item to it.
    // For each next item (N) in the sorted axis list:
    // - For each item (E) in the active list:
    // - - If N.x > (E.x + E.width) : Remove E from the active list.
    // - - Else                     : Report potential collision between N and E before adding N to the active list.

    // Do nothing if there are no boxes.
    if (!boxes.length) { return; }

    // Sort the boxes left-to-right.
    boxes.sort((a, b) => a.x - b.x);

    // Create the active list, adding the left- most box .
    const activeList = [boxes.shift()];

    // For each next item (N) in the sorted axis list.
    while (boxes.length) {
      // Get the next box along.
      const next = boxes.shift();

      // Check the next box against every one in the active list.
      for (var activeIndex = 0; activeIndex < activeList.length; activeIndex++) {
        // Get the current active item.
        const active = activeList[activeIndex];

        if (next.x > (active.x + active.width)) {

        } else {

        }
      }
    }
  }

  function drawBoxes(boxes) 
  {
    for (var i = 0; i < boxes.length; i++)
    {
      ctx.fillStyle = "#7ca3ad";
      ctx.fillRect(boxes[i].x - boxes[i].halfWidth, boxes[i].y - boxes[i].halfHeight, boxes[i].width, boxes[i].height);
    }
  }

  function go() {
    // Create the boxes in the world.
    var boxes = [
      createAABB("a", 200, 100, 300, 10),
      createAABB("b", 150, 220, 200, 100),
      createAABB("c", 350, 250, 100, 200),
      createAABB("d", 200, 100, 50, 100),
      createAABB("e", 300, 400, 300, 80),
      createAABB("f", 100, 350, 150, 100),
      createAABB("g", 450, 200, 10, 200)
    ];

    // Find potential collisions on the X axis.
    findXAxisIntersections(boxes);

    // Draw the boxes.
    drawBoxes(boxes);
  }

  // Do the stuff!!!! 
  go();
   
  document.body.appendChild(canvas);
</script>
</html>